
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.iden3.io/basics/key-concepts/">
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.4.0, mkdocs-material-8.5.3">
    
    
      
        <title>Key concepts - Iden3 Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7a952b86.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#key-concepts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Iden3 Documentation" class="md-header__button md-logo" aria-label="Iden3 Documentation" data-md-component="logo">
      
  <img src="../../logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Iden3 Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Key concepts
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/iden3/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../introduction/" class="md-tabs__link md-tabs__link--active">
        The basics
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../protocol/spec/" class="md-tabs__link">
        Iden3 protocol
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../getting-started/getting-started/" class="md-tabs__link">
        Core Tutorial
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../protocol/zklogin/" class="md-tabs__link">
        Services and protocols
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../protocol/main-circuits/" class="md-tabs__link">
        Circuits
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../circom-snarkjs/" class="md-tabs__link">
      Circom / snarkjs
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../contracts/state/" class="md-tabs__link">
        Contracts
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../publications/publications/" class="md-tabs__link">
      Publications
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Iden3 Documentation" class="md-nav__button md-logo" aria-label="Iden3 Documentation" data-md-component="logo">
      
  <img src="../../logo.svg" alt="logo">

    </a>
    Iden3 Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/iden3/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          The basics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="The basics" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          The basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Key concepts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Key concepts
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#identity" class="md-nav__link">
    Identity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#claims" class="md-nav__link">
    Claims
  </a>
  
    <nav class="md-nav" aria-label="Claims">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples-of-claims" class="md-nav__link">
    Examples of Claims
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direct-claims" class="md-nav__link">
    Direct Claims
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indirect-claims" class="md-nav__link">
    Indirect Claims
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zero-knowledge-proofs" class="md-nav__link">
    Zero-knowledge Proofs
  </a>
  
    <nav class="md-nav" aria-label="Zero-knowledge Proofs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nightclub-entry" class="md-nav__link">
    Nightclub Entry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ico-participation" class="md-nav__link">
    ICO Participation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anonymous-voting" class="md-nav__link">
    Anonymous Voting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-reusable-proofs" class="md-nav__link">
    Non-reusable Proofs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zk-snarks" class="md-nav__link">
    ZK-SNARKs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merkle-trees" class="md-nav__link">
    Merkle Trees
  </a>
  
    <nav class="md-nav" aria-label="Merkle Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specifications" class="md-nav__link">
    Specifications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tamper-resistance" class="md-nav__link">
    Tamper Resistance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proof-of-membership" class="md-nav__link">
    Proof of Membership
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scalability" class="md-nav__link">
    Scalability
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sparse-merkle-trees" class="md-nav__link">
    Sparse Merkle Trees
  </a>
  
    <nav class="md-nav" aria-label="Sparse Merkle Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proof-of-non-membership" class="md-nav__link">
    Proof of Non-membership
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-do-we-use-merkle-trees-at-iden3" class="md-nav__link">
    Why Do We use Merkle Trees at iden3?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#definitions" class="md-nav__link">
    Definitions
  </a>
  
    <nav class="md-nav" aria-label="Definitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hash-functions" class="md-nav__link">
    Hash Functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hash-pointers" class="md-nav__link">
    Hash Pointers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        Getting started
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Iden3 protocol
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Iden3 protocol" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Iden3 protocol
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/spec/" class="md-nav__link">
        Iden3 protocol specs
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Claim
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Claim" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Claim
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/claims-structure/" class="md-nav__link">
        Structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/bjjkey/" class="md-nav__link">
        AuthBJJCredential
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/claim-schema/" class="md-nav__link">
        Claim Schema
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Core Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Core Tutorial" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Core Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/getting-started/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          Core Components
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Core Components" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Core Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/babyjubjub/" class="md-nav__link">
        Baby Jubjub Keypair
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/mt/" class="md-nav__link">
        Sparse Merkle Tree
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_3" type="checkbox" id="__nav_3_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_3">
          Claim
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Claim" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_3">
          <span class="md-nav__icon md-icon"></span>
          Claim
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/claim/generic-claim/" class="md-nav__link">
        Generic Claim
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/claim/auth-claim/" class="md-nav__link">
        Auth Claim
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/claim/claim-schema/" class="md-nav__link">
        Claim Schema
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_4" type="checkbox" id="__nav_3_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_4">
          Identity
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Identity" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_4">
          <span class="md-nav__icon md-icon"></span>
          Identity
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/identity/identity-structure/" class="md-nav__link">
        Identity Structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/identity/identity-state/" class="md-nav__link">
        Identity State
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/identity/identifier/" class="md-nav__link">
        Identifier
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_3">
          Issue Claim
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Issue Claim" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Issue Claim
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/issue-claim-overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/signature-claim/signature/" class="md-nav__link">
        via Signature
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_3" type="checkbox" id="__nav_3_3_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_3_3">
          via Merkle Tree
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="via Merkle Tree" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_3_3">
          <span class="md-nav__icon md-icon"></span>
          via Merkle Tree
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/state-transition/state-transition/" class="md-nav__link">
        Intro to State Transition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/state-transition/new-identity-state/" class="md-nav__link">
        Add Claim to the Claims Tree
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/state-transition/state-transition-proof/" class="md-nav__link">
        Generate Proof for State Transition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/state-transition/on-chain-state-transition/" class="md-nav__link">
        Verify the Proof On-Chain
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Services and protocols
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Services and protocols" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Services and protocols
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/zklogin/" class="md-nav__link">
        Login protocol
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/querylanguage/" class="md-nav__link">
        Proof Query language
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Circuits
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Circuits" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Circuits
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/main-circuits/" class="md-nav__link">
        Main Circuits
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol/template-circuits/" class="md-nav__link">
        Template Circuits
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../circom-snarkjs/" class="md-nav__link">
        Circom / snarkjs
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Contracts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Contracts" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Contracts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contracts/state/" class="md-nav__link">
        State Contract
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../publications/publications/" class="md-nav__link">
        Publications
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#identity" class="md-nav__link">
    Identity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#claims" class="md-nav__link">
    Claims
  </a>
  
    <nav class="md-nav" aria-label="Claims">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples-of-claims" class="md-nav__link">
    Examples of Claims
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direct-claims" class="md-nav__link">
    Direct Claims
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indirect-claims" class="md-nav__link">
    Indirect Claims
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zero-knowledge-proofs" class="md-nav__link">
    Zero-knowledge Proofs
  </a>
  
    <nav class="md-nav" aria-label="Zero-knowledge Proofs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nightclub-entry" class="md-nav__link">
    Nightclub Entry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ico-participation" class="md-nav__link">
    ICO Participation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anonymous-voting" class="md-nav__link">
    Anonymous Voting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-reusable-proofs" class="md-nav__link">
    Non-reusable Proofs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zk-snarks" class="md-nav__link">
    ZK-SNARKs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merkle-trees" class="md-nav__link">
    Merkle Trees
  </a>
  
    <nav class="md-nav" aria-label="Merkle Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#specifications" class="md-nav__link">
    Specifications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tamper-resistance" class="md-nav__link">
    Tamper Resistance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#proof-of-membership" class="md-nav__link">
    Proof of Membership
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scalability" class="md-nav__link">
    Scalability
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sparse-merkle-trees" class="md-nav__link">
    Sparse Merkle Trees
  </a>
  
    <nav class="md-nav" aria-label="Sparse Merkle Trees">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proof-of-non-membership" class="md-nav__link">
    Proof of Non-membership
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-do-we-use-merkle-trees-at-iden3" class="md-nav__link">
    Why Do We use Merkle Trees at iden3?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#definitions" class="md-nav__link">
    Definitions
  </a>
  
    <nav class="md-nav" aria-label="Definitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hash-functions" class="md-nav__link">
    Hash Functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hash-pointers" class="md-nav__link">
    Hash Pointers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/iden3/docs/edit/master/docs/basics/key-concepts.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="key-concepts">Key Concepts</h1>
<h2 id="identity">Identity</h2>
<p>At iden3, our goal is to democratize identity. We believe that everyone should be empowered to become their own <a href="https://en.wikipedia.org/wiki/Certificate_authority">certification authority</a>.</p>
<p><strong>What Do We Mean by Identity?</strong></p>
<p>An identity can be a person, a company, an organization, a <a href="https://hackernoon.com/what-is-a-dao-c7e84aa1bd69">DAO</a>, or a government. Identity can even be a thing: a chair, a room, a bot, and so on. When we talk about identities, we are referring to "identities as accounts".</p>
<p>Generally speaking, these accounts are going to be smart contracts. So <strong>you can think of identities as smart contracts</strong>, where the address of the contract is the identifier of that identity.</p>
<p><strong>Key Takeaways</strong>:</p>
<ul>
<li>
<p><strong>Anything</strong> can be an identity.</p>
</li>
<li>
<p>One person can define and have many identities.</p>
</li>
<li>
<p>In Ethereum, an identity is an <strong>account</strong> or a smart contract.</p>
</li>
</ul>
<h2 id="claims">Claims</h2>
<p>An <a href="#identity">identity</a>  can provide a claim. You can think of a claim as a statement: something an identity is saying.</p>
<p>Most of the time, these statements refer to other identities. In other words, <strong>claims usually create relations between identities.</strong></p>
<p>For example, when a university (identity) says that a student (identity) has a degree, this is a statement (claim) about the student. This statement creates a relation between the student and the university.</p>
<p><strong>Claims can be public or private.</strong> And it turns out that almost anything we say or do can be thought of as a claim. Company invoices, Facebook likes, and email messages can all be thought of as claims.</p>
<h3 id="examples-of-claims">Examples of Claims</h3>
<ul>
<li>
<p>A certificate (e.g. birth certificate)</p>
</li>
<li>
<p>A debt recognition</p>
</li>
<li>
<p>An invoice</p>
</li>
<li>
<p>An Instagram "Like"</p>
</li>
<li>
<p>An endorsement (reputation)</p>
</li>
<li>
<p>An email</p>
</li>
<li>
<p>A driving license</p>
</li>
<li>
<p>A role in a company</p>
</li>
<li>
<p>... Almost anything!</p>
</li>
</ul>
<h3 id="direct-claims">Direct Claims</h3>
<p>If an identity wants to create many claims, it can put all the claims in a database, construct a <a href="#merkle-trees">Merkle tree</a> of that database, and just publish (with a transaction) the root of the Merkle tree on-chain.</p>
<p>If the identity wants to update the claims later, it can repeat the same process and publish the new root of the Merkle tree.</p>
<p>For example, one could imagine a government adding/modifying millions of claims in a single transaction.</p>
<h3 id="indirect-claims">Indirect Claims</h3>
<p>While direct claims scale really well for identities that make a lot of claims (since millions of claims can be batched in a single transaction), an average user will probably only need to make a few claims a day, and so won't benefit from this batching.</p>
<p>This is where indirect claims come in handy. Instead of paying gas every time to update the Merkle root on-chain, indirect claims allow users to send claims off-chain to a <strong>relayer</strong>.</p>
<p>The idea is that with relayers, millions of users can create millions of claims on mainnet <strong>without</strong> spending any <strong>gas</strong> (since the relayer is responsible for batching the claims and publishing the transactions).</p>
<p>On top of this, using <a href="#zero-knowledge-proofs">zero-knowledge proofs</a>, we can ensure that the relayer is trustless. In other words, we can make sure that the relayer can't lie about the claims we sent it. The worst a relayer can do is to not publish them (and if this happens, we, as the users, always have the choice to change relayers).</p>
<h2 id="zero-knowledge-proofs">Zero-knowledge Proofs</h2>
<p><em>In cryptography, a zero-knowledge proof or zero-knowledge protocol is a method by which one party (the prover) can prove to another party (the verifier) that they know a value x, without conveying any information apart from the fact that they know the value x.</em> (<a href="https://en.wikipedia.org/wiki/Zero-knowledge_proof">Source</a>)</p>
<p>In other words, zero-knowledge proofs allow us to prove something specific without revealing any extra information.</p>
<p>Why do we care? Simply put, when we're talking about claims, sometimes, we want to prove things in a private manner.</p>
<h3 id="examples">Examples</h3>
<h4 id="nightclub-entry">Nightclub Entry</h4>
<p>Say you want to enter a nightclub, and you need to prove to the bouncer that you are over 18. But you don't want to reveal to him your name, address, or anything else that's not relevant.</p>
<p>With zero-knowledge proof, you can prove that you hold the key that belongs to an identity that the state says is over 18, without revealing anything else about that identity.</p>
<h4 id="ico-participation">ICO Participation</h4>
<p>Say an ICO is available only to the KYC-approved or authorized users. With zk proofs, you can prove that you are an authorized person to participate in the ICO without revealing who you are or how much you spent.</p>
<h4 id="anonymous-voting">Anonymous Voting</h4>
<p>Similar to the above, zk proofs allow you to prove that you are an eligible identity, without revealing your identity.</p>
<h3 id="non-reusable-proofs">Non-reusable Proofs</h3>
<p>A non-reusable proof is a received proof that is not valid to be sent to a third identity.</p>
<p>For example, imagine that you belong to a political party, P. And P has made a private claim that you belong to it.</p>
<p>Now, you want to prove to another identity that you belong to P, but you don't want that this identity can pass on that proof to others. In other words, you want to make sure the proof stays between the two of you.We can do this using zero-knowledge proofs.</p>
<p>How?</p>
<p>To prove something - let's call it A - we can create a new proof called B that is valid either if A is valid or we know the private key of the recipient, R.</p>
<!-- TODO *image coming soon* -->

<p>Clearly, we don't know R's private key, so when we share a valid proof B with R, R knows that A must be valid.</p>
<!-- TODO *image coming soon* -->

<p>To see why B is non-reusable, let us suppose that R wants to share B with another recipient R'.</p>
<!-- TODO *image coming soon* -->

<p>Now, from the perspective of R', B is valid either if A is valid or R knows its own private key.</p>
<!-- TODO *image coming soon* -->

<p>But since R clearly knows its private key, R' can't tell whether A is valid or not.</p>
<!-- TODO *image coming soon* -->

<h3 id="zk-snarks">ZK-SNARKs</h3>
<p>You can think of zk-SNARKs as an efficient way to produce zero-knowledge proofs. These are the proofs that are short enough to be published on blockchain and that can be read later by a verifier.</p>
<h2 id="merkle-trees">Merkle Trees</h2>
<p>A Merkle tree is a <a href="https://en.wikipedia.org/wiki/Binary_tree">binary tree</a> built using hash pointers (if you're unfamiliar with what a hash pointer or function is, see the definitions section at the bottom of this page).</p>
<p>We care about Merkle trees because we want to build a data structure that:</p>
<ul>
<li>Can store lots of data (<strong>scalability</strong>)</li>
<li>Makes it easy to prove that some data exists (<strong>proof of membership</strong>)</li>
<li>Allows us to check that data hasn't been altered (<strong>tamper resistance</strong>)</li>
</ul>
<p>Merkle trees satisfy the three properties mentioned above.</p>
<h3 id="specifications">Specifications</h3>
<p>Before we take a closer look at these properties, let's go through how to build a Merkle tree with some data.</p>
<p><img alt="" src="../../imgs/merkle-tree-specification-visual-0.png" /></p>
<p>Suppose we have several blocks containing data and that these blocks form the leaves of our tree.</p>
<p><img alt="" src="../../imgs/merkle-tree-specification-visual-1.png" /></p>
<p>The first step is to create a parent node for each data block. These parent nodes form the next level in the tree and store the hash of their descendent data block.</p>
<p><img alt="" src="../../imgs/merkle-tree-specification-visual-2.png" /></p>
<p>Next, we group these parent nodes into pairs and store the hash of each pair one level up the tree.</p>
<p><img alt="" src="../../imgs/merkle-tree-specification-visual-3.png" /></p>
<p>We continue doing this until we are left with a single block, the root of the tree, also called Merkle Root.</p>
<h3 id="tamper-resistance">Tamper Resistance</h3>
<p>It turns out that any attempt to tamper with any piece of data can be detected by simply remembering the hash at the root of the tree.</p>
<p>To understand why this is the case, let’s look at what happens if an adversary wants to tamper with a data block.</p>
<p><img alt="" src="../../imgs/merkle-tree-tamper-resistance-visual-0.png" /></p>
<p>If an adversary tampers with a block at the leaf of our tree,</p>
<p><img alt="" src="../../imgs/merkle-tree-tamper-resistance-visual-1.png" /></p>
<p>it will cause the mismatch with the hash in the node that’s one level up.</p>
<p><img alt="" src="../../imgs/merkle-tree-tamper-resistance-visual-2.png" /></p>
<p>So the adversary will have to tamper with that too.</p>
<p><img alt="" src="../../imgs/merkle-tree-tamper-resistance-visual-3.png" /></p>
<p>This means s/he has to tamper with the node one level up from there.</p>
<p><img alt="" src="../../imgs/merkle-tree-tamper-resistance-visual-4.png" /></p>
<p>And so on… Eventually, s/he will get to the root. If s/he tries to tamper with the root too, we’ll know because this is the node we’ve kept track of.</p>
<h3 id="proof-of-membership">Proof of Membership</h3>
<p>Merkle trees allow us to quickly check membership (through a neat mechanism known as Merkle proofs). What do we mean by that?</p>
<p><img alt="" src="../../imgs/merkle-tree-proof-of-membership-visual-0.png" /></p>
<p>Suppose, as usual, we remember just the root (on-chain). And we want to prove that a certain data block - data0 - is a member of the Merkle tree.</p>
<p><img alt="" src="../../imgs/merkle-tree-proof-of-membership-visual-1.png" /></p>
<p>All we need are the blocks on the path from the data block to the root.</p>
<p><img alt="" src="../../imgs/merkle-tree-proof-of-membership-visual-2.png" /></p>
<p>And each of data0's siblings on the way up.</p>
<p><img alt="" src="../../imgs/merkle-tree-proof-of-membership-visual-3.png" /></p>
<p>We can ignore the rest of the tree, as these blocks are enough to allow us to verify the hashes all the way up to the root of the tree. But how?</p>
<p><img alt="" src="../../imgs/merkle-tree-proof-of-membership-visual-4.png" /></p>
<p>The idea is to recalculate the root by recursively hashing the data. If the calculated root is equal to the on-chain root, it proves that the data block exists in the Merkle tree.</p>
<p><img alt="" src="../../imgs/merkle-tree-proof-of-membership-visual-5.png" /></p>
<p>In our case, we start by calculating the hash of data0 and storing it in the block labeled 0.</p>
<p><img alt="" src="../../imgs/merkle-tree-proof-of-membership-visual-6.png" /></p>
<p>We then calculate the hash of the hash of data0 concatenated with the hash of data1. In other words, we calculate the hash of the concatenation of blocks 0 and 1 and store it in block 4.</p>
<p><img alt="" src="../../imgs/merkle-tree-proof-of-membership-visual-7.png" /></p>
<p>Finally, we calculate the hash of blocks 4 and 5 to obtain the recalculated root.</p>
<p><img alt="" src="../../imgs/merkle-tree-proof-of-membership-visual-8.png" /></p>
<p>If the calculated root is equal to the on-chain root, we’ve proven that data0 exists in the Merkle tree.</p>
<p>In technical terms:</p>
<p><em>This means that if there are n nodes in the tree, only about log(n) items need to be shown. And since each step just requires computing the hash of the child block, it takes about log(n) time for us to verify it. And so even if the Merkle tree contains a very large number of blocks, we can still prove membership in a relatively short time. Verification thus runs in time and space that’s logarithmic in the number of nodes in the tree.</em> (<a href="https://d28rh4a8wq0iu5.cloudfront.net/bitcointech/readings/princeton_bitcoin_book.pdf">Source</a> (pg 35))</p>
<h3 id="scalability">Scalability</h3>
<p>Storing data on a blockchain is expensive. Merkle trees help us in minimizing the amount of data stored on-chain. How?</p>
<p>As we saw in the previous sections, to ensure tamper-resistance and Proof of Membership, we need to store only the root of the tree, not the whole tree. This means that no matter how big the tree is, the only piece of data we actually need to store on-chain is the root.</p>
<h3 id="sparse-merkle-trees">Sparse Merkle Trees</h3>
<p>At iden3, we use a slightly more complex data structure called a sparse Merkle tree. </p>
<p>A sparse Merkle tree is like a standard Merkle tree, except that its contained data is indexed, and each data block is placed at the leaf that corresponds to that block's index.</p>
<p>In addition to inheriting the <em>tamper-resistance</em> and <em>proof of membership</em> properties from normal Merkle trees, sparse Merkle trees make it easy to prove that some data doesn’t exist (<em>proof of non-membership</em>).</p>
<h4 id="proof-of-non-membership">Proof of Non-membership</h4>
<p><img alt="" src="../../imgs/sparse-merkle-tree-0.png" /></p>
<p>Now consider that we only have two pieces of data -- <code>data0</code> and <code>data3</code> -- with indices <code>0</code> and <code>3</code> respectively.  To construct a sparse Merkle tree, we populate the 0th and 3rd leaves with this data, leaving the 1st and 2nd leaves empty.</p>
<p><img alt="" src="../../imgs/sparse-merkle-tree-1.png" /></p>
<p>Well, almost empty! To be precise, we fill the 1st and 2nd leaves in with a special placeholder value like <code>null</code>.</p>
<p><img alt="" src="../../imgs/sparse-merkle-tree-2.png" /></p>
<p>With this placeholder, we can now build up the rest of the tree.</p>
<p><img alt="" src="../../imgs/sparse-merkle-tree-3.png" /></p>
<p>Now, what happens if we want to prove that a piece of (indexed) data -- <code>data2</code> -- is not a member of this tree?</p>
<p><img alt="" src="../../imgs/sparse-merkle-tree-4.png" /></p>
<p>Thanks to the way our data is indexed, proving that <code>data2</code> is not a member of the tree is equivalent to proving that the value of the leaf at index <code>2</code> is <code>null</code>!</p>
<p>Put another way, proving non-membership of a <code>data</code> block is equivalent to proving membership of <code>null</code> (a simple Merkle proof). And as we saw in our previous post, doing this efficiently is a basic property of a Merkle tree.</p>
<h4 id="summary">Summary</h4>
<p>By indexing data and making leaves empty, sparse Merkle trees allow us to reframe proofs of non-membership into proofs of membership (a.k.a Merkle proofs), making it easy to prove that some data does not exist.</p>
<p>One drawback to sparse Merkle trees is that they are really big. This means that without optimizations, read and write operations can be quite inefficient.</p>
<blockquote>
<p>For example, a sparse Merkle tree usually has 2^256 leaves vs. 2^32 for a normal Merkle tree. This means that naive implementations require 256 operations to read or write (vs 32).</p>
</blockquote>
<p>Luckily, these sorts of inefficiencies are largely illusory. Since fairly simple <a href="https://ethresear.ch/t/optimizing-sparse-merkle-trees/3751">optimizations</a> exist to get around them!</p>
<blockquote>
<p>Note: while we won't get into the details here, one of the keys to these optimizations is that sparse Merkle trees are mostly sparse. This means many of the subtrees will end up being zero subtrees. Since H(0), H(H(0)), H(H(H(0))), and so on are all constant values, the zero-subtrees can be cached (calculated once, stored, and then omitted from Merkle proofs), greatly reducing the size of computations.</p>
</blockquote>
<h3 id="why-do-we-use-merkle-trees-at-iden3">Why Do We use Merkle Trees at iden3?</h3>
<p>At iden3, one of our major goals is scalability. Specifically, we believe that anybody should be able to create as many identities as they want. And that <strong>any identity should be able to generate as many claims as it wants.</strong></p>
<p>Imagine if you had to make a new transaction to the blockchain every time you wanted to make a new claim? Even worse, imagine you're a government and you're responsible for making millions of claims every day!</p>
<p>Achieving this goal requires minimizing the amount of data stored on-chain. This is where Merkle trees come into the picture.</p>
<p>Even if you're a government that is making millions of claims a day, you can just construct a tree (off-chain) with each claim as a separate data block, and simply calculate and store the root on-chain.</p>
<p>In other words, Merkle trees allow prolific claim generators to add/modify <strong>millions of claims</strong> in a single transaction. This makes it easy to scale the claims.</p>
<h3 id="definitions">Definitions</h3>
<h4 id="hash-functions">Hash Functions</h4>
<p>A hash function maps an input string of any size to an output string of a fixed size.</p>
<p>It must be efficiently computable (for any given input string, we can figure out the output of the hash function in a reasonable amount of time. More technically, computing the hash of an n‐bit string should have a running time that is O(n)).</p>
<p>For a hash function to be cryptographically secure, it must have three additional properties: </p>
<ul>
<li>Collision Resistance</li>
<li>Hiding</li>
<li>Puzzle-friendliness</li>
</ul>
<p>While we would not get into the details here, let's briefly discuss what each of these properties stands for.</p>
<p><strong>Collision Resistance</strong> means that nobody can find two inputs that map to the same output.</p>
<p><strong>Hiding</strong> means that given an output there's no feasible way to figure out the input that generated it.</p>
<p><strong>Puzzle-friendliness</strong> is a little more complicated. Intuitively, it means that it is very hard to target the hash function to come out to some particular output value y. Don't worry if you can't understand why this property is useful. In our context of things, it is not very important.</p>
<h4 id="hash-pointers">Hash Pointers</h4>
<p>A hash pointer is simply a pointer to where some information is stored together with a cryptographic hash of the
information. <strong>A pointer gives you a way to retrieve the information, whereas a hash pointer gives you a way to verify that the information hasn’t changed.</strong></p>
<p>In other words, a hash pointer is a pointer to where data is stored along with a cryptographic hash of the value of that data at some fixed point in time.</p>
<p>If at some point in the future, we want to check if the data hasn't changed, we simply hash the data again and verify that the new output (cryptographic hash) matches the previous output. This works because we know by the <strong>collision resistance</strong> property of the hash function that nobody can find two inputs that map to the same output. So if the output is the same, the input must also have been the same.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../introduction/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Introduction" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Introduction
            </div>
          </div>
        </a>
      
      
        
        <a href="../getting-started/" class="md-footer__link md-footer__link--next" aria-label="Next: Getting started" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Getting started
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://t.me/iden3io" target="_blank" rel="noopener" title="t.me" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8Zm114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452 0 0 1 3.53 6.716 43.765 43.765 0 0 1 .417 9.769Z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/iden3/docs" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://iden3.io/" target="_blank" rel="noopener" title="iden3.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M0 3.75C0 2.784.784 2 1.75 2h20.5c.966 0 1.75.784 1.75 1.75v16.5A1.75 1.75 0 0 1 22.25 22H1.75A1.75 1.75 0 0 1 0 20.25V3.75zm1.75-.25a.25.25 0 0 0-.25.25V5.5h4v-2H1.75zM7 3.5v2h4v-2H7zm5.5 0v2h10V3.75a.25.25 0 0 0-.25-.25H12.5zm10 3.5h-21v13.25c0 .138.112.25.25.25h20.5a.25.25 0 0 0 .25-.25V7z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.tracking"], "search": "../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.37e9125f.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>